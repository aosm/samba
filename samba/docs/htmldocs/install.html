<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 2. How to Install and Test SAMBA</title><link rel="stylesheet" href="samba.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.60.1"><link rel="home" href="samba-doc.html" title="SAMBA Project Documentation"><link rel="up" href="introduction.html" title="Part I. General Installation"><link rel="previous" href="IntroSMB.html" title="Chapter 1. Introduction to Samba"><link rel="next" href="FastStart.html" title="Chapter 3. Fast Start for the Impatient"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 2. How to Install and Test SAMBA</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="IntroSMB.html">Prev</a> </td><th width="60%" align="center">Part I. General Installation</th><td width="20%" align="right"> <a accesskey="n" href="FastStart.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="install"></a>Chapter 2. How to Install and Test SAMBA</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Andrew</span> <span class="surname">Tridgell</span></h3><div class="affiliation"><span class="orgname">Samba Team<br></span><div class="address"><p><tt class="email">&lt;<a href="mailto:tridge@samba.org">tridge@samba.org</a>&gt;</tt></p></div></div></div></div><div><div class="author"><h3 class="author"><span class="firstname">Jelmer</span> <span class="othername">R.</span> <span class="surname">Vernooij</span></h3><div class="affiliation"><span class="orgname">The Samba Team<br></span><div class="address"><p><tt class="email">&lt;<a href="mailto:jelmer@samba.org">jelmer@samba.org</a>&gt;</tt></p></div></div></div></div><div><div class="author"><h3 class="author"><span class="firstname">John</span> <span class="othername">H.</span> <span class="surname">Terpstra</span></h3><div class="affiliation"><span class="orgname">Samba Team<br></span><div class="address"><p><tt class="email">&lt;<a href="mailto:jht@samba.org">jht@samba.org</a>&gt;</tt></p></div></div></div></div><div><div class="author"><h3 class="author"><span class="firstname">Karl</span> <span class="surname">Auer</span></h3></div></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><a href="install.html#id2883917">Obtaining and installing samba</a></dt><dt><a href="install.html#id2883961">Configuring samba (smb.conf)</a></dt><dd><dl><dt><a href="install.html#id2883999">Example Configuration</a></dt><dt><a href="install.html#id2884191">SWAT</a></dt></dl></dd><dt><a href="install.html#id2884236">Try listing the shares available on your 
	server</a></dt><dt><a href="install.html#id2884294">Try connecting with the unix client</a></dt><dt><a href="install.html#id2884411">Try connecting from another SMB client</a></dt><dt><a href="install.html#id2884494">What If Things Don't Work?</a></dt><dt><a href="install.html#id2884528">Common Errors</a></dt><dd><dl><dt><a href="install.html#id2884539">Large number of smbd processes</a></dt><dt><a href="install.html#id2884640">&quot;open_oplock_ipc: Failed to get local UDP socket for address 100007f. Error was Cannot assign requested&quot;</a></dt><dt><a href="install.html#id2884661">&quot;The network name cannot be found&quot;</a></dt></dl></dd></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2883917"></a>Obtaining and installing samba</h2></div></div><div></div></div><p>
	Binary packages of samba are included in almost any Linux or
	UNIX distribution. There are also some packages available at 
	<a href="http://samba.org/" target="_top">the samba homepage</a>.
	</p><p>If you need to compile samba from source, check 
		<a href="compiling.html" title="Chapter 36. How to compile Samba">the chapter about compiling samba from scratch</a>.</p><p>If you have already installed samba, or if your operating system
	was pre-installed with samba, then you may not need to bother with this
	chapter. On the other hand, you may want to read this chapter anyhow
	for information about updating samba.</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2883961"></a>Configuring samba (smb.conf)</h2></div></div><div></div></div><p>
	Samba's configuration is stored in the <tt class="filename">smb.conf</tt> file, 
	that usually resides in <tt class="filename">/etc/samba/smb.conf</tt> 
	or <tt class="filename">/usr/local/samba/lib/smb.conf</tt>. You can either 
	edit this file yourself or do it using one of the many graphical 
	tools that are available, such as the web-based interface swat, that 
	is included with samba.
	</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2883999"></a>Example Configuration</h3></div></div><div></div></div><p>
	There are sample configuration files in the examples subdirectory in the
	distribution. I suggest you read them carefully so you can see how the options
	go together in practice. See the man page for all the options.
	</p><p>
	The simplest useful configuration file would be something like this:
	</p><p>
	</p><div class="example"><a name="id2884022"></a><p class="title"><b>Example 2.1. Simplest possible smb.conf file</b></p><table class="simplelist" border="0" summary="Simple list"><tr><td> </td></tr><tr><td><i class="parameter"><tt>[global]</tt></i></td></tr><tr><td><i class="parameter"><tt>workgroup = MIDEARTH</tt></i></td></tr><tr><td> </td></tr><tr><td><i class="parameter"><tt>[homes]</tt></i></td></tr><tr><td><i class="parameter"><tt>guest ok = no</tt></i></td></tr><tr><td><i class="parameter"><tt>read only = no</tt></i></td></tr></table></div><p>
	</p><p>
	This will allow connections by anyone with an account on the server, using either
	their login name or <i class="parameter"><tt>homes</tt></i>&quot; as the service name.
	(Note that the workgroup that Samba must also be set.)
	</p><p>
	Make sure you put the <tt class="filename">smb.conf</tt> file in the correct place 
	(usually in <tt class="filename">/etc/samba</tt>).
	</p><p>
	For more information about security settings for the 
	<i class="parameter"><tt>[homes]</tt></i> share please refer to 
	<a href="securing-samba.html" title="Chapter 15. Securing Samba">&quot;Securing Samba&quot;</a>.
	</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id2884137"></a>Test your config file with <b class="command">testparm</b></h4></div></div><div></div></div><p>
	It's important that you test the validity of your <tt class="filename">smb.conf</tt>
	file using the <span class="application">testparm</span> program. If testparm runs OK
	then it will list the loaded services. If not it will give an error message.
	</p><p>
	Make sure it runs OK and that the services look reasonable before proceeding.
	</p><p>
	Always run testparm again when you change <tt class="filename">smb.conf</tt>!
	</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2884191"></a>SWAT</h3></div></div><div></div></div><p>
	SWAT is a web-based interface that helps you configure samba. 
	SWAT might not be available in the samba package on your platform, 
	but in a separate package. Please read the swat manpage 
	on compiling, installing and configuring swat from source.
	</p><p>
	To launch SWAT just run your favorite web browser and 
	point it at <a href="http://localhost:901/" target="_top">http://localhost:901/</a>. Replace
	<i class="replaceable"><tt>localhost</tt></i>
	with the name of the computer you are running samba on if you 
	are running samba on a different computer than your browser.
	</p><p>
	Note that you can attach to SWAT from any IP connected 
	machine but connecting from a remote machine leaves your 
	connection open to password sniffing as passwords will be sent 
	in the clear over the wire. 
	</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2884236"></a>Try listing the shares available on your 
	server</h2></div></div><div></div></div><pre class="screen">
<tt class="prompt">$ </tt><b class="userinput"><tt>smbclient -L <i class="replaceable"><tt>yourhostname</tt></i></tt></b>
</pre><p>You should get back a list of shares available on 
	your server. If you don't then something is incorrectly setup. 
	Note that this method can also be used to see what shares 
	are available on other LanManager clients (such as WfWg).</p><p>If you choose user level security then you may find 
	that Samba requests a password before it will list the shares. 
	See the <b class="command">smbclient</b> man page for details. (you 
	can force it to list the shares without a password by
	adding the option -U% to the command line. This will not work 
	with non-Samba servers)</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2884294"></a>Try connecting with the unix client</h2></div></div><div></div></div><p>
</p><pre class="screen">
<tt class="prompt">$ </tt><b class="userinput"><tt>smbclient <i class="replaceable"><tt> //yourhostname/aservice</tt></i></tt></b>
</pre><p>Typically the <i class="replaceable"><tt>yourhostname</tt></i> 
	would be the name of the host where you installed <span class="application">smbd</span>. 
	The <i class="replaceable"><tt>aservice</tt></i> is 
	any service you have defined in the <tt class="filename">smb.conf</tt>
	file. Try your user name if you just have a <i class="parameter"><tt>[homes]</tt></i>
	section
	in <tt class="filename">smb.conf</tt>.</p><p>For example if your unix host is <i class="replaceable"><tt>bambi</tt></i>
	and your login name is <i class="replaceable"><tt>fred</tt></i> you would type:</p><pre class="screen">
<tt class="prompt">$ </tt><b class="userinput"><tt>smbclient //<i class="replaceable"><tt>bambi</tt></i>/<i class="replaceable"><tt>fred</tt></i></tt></b>
</pre></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2884411"></a>Try connecting from another SMB client</h2></div></div><div></div></div><p>Try mounting disks. from a DOS, Windows or OS/2 client, eg:</p><pre class="screen">
<tt class="prompt">C:\&gt; </tt><b class="userinput"><tt>net use d: \\servername\service</tt></b>
</pre><p>Try printing. eg:</p><p>
</p><pre class="screen">
<tt class="prompt">C:\&gt; </tt><b class="userinput"><tt>net use lpt1:	\\servername\spoolservice</tt></b>
</pre><p>
</p><pre class="screen"><tt class="prompt">C:\&gt; </tt><b class="userinput"><tt>print filename</tt></b>
</pre></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2884494"></a>What If Things Don't Work?</h2></div></div><div></div></div><p>Then you might read the file chapter <a href="diagnosis.html" title="Chapter 33. The Samba checklist">diagnosis</a>
	and the FAQ. If you are still stuck then refer to <a href="problems.html" title="Chapter 34. Analysing and solving samba problems">&quot;Analysing and solving problems&quot;</a>.
	Samba has been successfully installed at thousands of sites worldwide,
	so maybe someone else has hit your problem and has overcome it.</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2884528"></a>Common Errors</h2></div></div><div></div></div><p>
The following questions and issues get raised on the samba mailing list over and over again.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2884539"></a>Large number of smbd processes</h3></div></div><div></div></div><p>
Samba consists on three core programs:
<span class="application">nmbd</span>, <span class="application">smbd</span>, <span class="application">winbindd</span>. <span class="application">nmbd</span> is the name server message daemon,
<span class="application">smbd</span> is the server message daemon, <span class="application">winbindd</span> is the daemon that
handles communication with Domain Controllers.
</p><p>
If your system is NOT running as a WINS server, then there will be one (1) single instance of
 <span class="application">nmbd</span> running on your system. If it is running as a WINS server then there will be
two (2) instances - one to handle the WINS requests.
</p><p>
<span class="application">smbd</span> handles ALL connection requests and then spawns a new process for each client
connection made. That is why you are seeing so many of them, one (1) per client connection.
</p><p>
<span class="application">winbindd</span> will run as one or two daemons, depending on whether or not it is being
run in &quot;split mode&quot; (in which case there will be two instances).
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2884640"></a>&quot;open_oplock_ipc: Failed to get local UDP socket for address 100007f. Error was Cannot assign requested&quot;</h3></div></div><div></div></div><p>Your loopback device isn't working correctly. Make sure it's configured properly. The loopback device is an internal (virtual) network device with 
		the ip address 127.0.0.1. Read your OS documentation for details 
	on how to configure the loopback on your system.</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2884661"></a>&quot;<span class="errorname">The network name cannot be found</span>&quot;</h3></div></div><div></div></div><p>
			This error can be caused by one of these misconfigurations:
		</p><div class="itemizedlist"><ul type="disc"><li><p>You specified an nonexisting <a class="indexterm" name="id2884686"></a><i class="parameter"><tt>path</tt></i> for the share in <tt class="filename">smb.conf</tt> </p></li><li><p>The user you are trying to access the share with does not 
					have sufficient permissions to access the <a class="indexterm" name="id2884714"></a><i class="parameter"><tt>path</tt></i> for the share. Both read (r) and access (x) should be possible.</p></li><li><p>The share you are trying to access does not exist.</p></li></ul></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="IntroSMB.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="introduction.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="FastStart.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 1. Introduction to Samba </td><td width="20%" align="center"><a accesskey="h" href="samba-doc.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 3. Fast Start for the Impatient</td></tr></table></div></body></html>
